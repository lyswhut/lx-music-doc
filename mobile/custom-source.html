<!doctype html><html lang=zh-Hans dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mobile/custom-source" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>自定义源脚本编写说明 | LX Music</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://lxmusic.toside.cn/mobile/custom-source><meta data-rh=true property=og:locale content=zh_Hans><meta data-rh=true name=docusaurus_locale content=zh-Hans><meta data-rh=true name=docsearch:language content=zh-Hans><meta data-rh=true name=keywords content="LX Music, 洛雪音乐助手, lx-music, lx-music-desktop, lx-music-mobile"><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="自定义源脚本编写说明 | LX Music"><meta data-rh=true name=description content="文件请使用 UTF-8 编码格式编写，脚本所用编程语言为 JavaScript，可以使用 ES6+ 语法。"><meta data-rh=true property=og:description content="文件请使用 UTF-8 编码格式编写，脚本所用编程语言为 JavaScript，可以使用 ES6+ 语法。"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://lxmusic.toside.cn/mobile/custom-source><link data-rh=true rel=alternate href=https://lxmusic.toside.cn/mobile/custom-source hreflang=zh-Hans><link data-rh=true rel=alternate href=https://lxmusic.toside.cn/mobile/custom-source hreflang=x-default><link rel=stylesheet href=/assets/css/styles.5bda2cda.css><script src=/assets/js/runtime~main.26205847.js defer></script><script src=/assets/js/main.13ab5e66.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg><div role=region aria-label=跳到主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="LX Music Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo.svg alt="LX Music Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LX Music</b></a><a class="navbar__item navbar__link" href=/desktop>桌面版文档</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/mobile>移动版文档</a><a class="navbar__item navbar__link" href=/download>软件下载</a><a class="navbar__item navbar__link" href=/report>问题反馈</a></div><div class="navbar__items navbar__items--right"><a href=https://github.com/lyswhut/lx-music-desktop target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">桌面版 GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a href=https://github.com/lyswhut/lx-music-mobile target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">移动版 GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title=切换浅色/暗黑模式（当前为浅色模式） aria-label=切换浅色/暗黑模式（当前为浅色模式） aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=搜索 aria-label=Search class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=回到顶部 class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label=文档侧边栏 class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/mobile>移动版文档</a><button aria-label="折叠侧边栏分类 '移动版文档'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/mobile/faq>常见问题</a><button aria-label="展开侧边栏分类 '常见问题'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mobile/scheme-url>Scheme URL 支持</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mobile/statusbar-lyric>状态栏歌词</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mobile/datapath>数据存储路径</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/mobile/custom-source>自定义源脚本编写说明</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mobile/use-source-code>源码使用方法</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mobile/license>许可协议</a></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=页面路径><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=主页面 class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/mobile><span itemprop=name>移动版文档</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>自定义源脚本编写说明</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>自定义源脚本编写说明</h1></header><p>文件请使用 UTF-8 编码格式编写，脚本所用编程语言为 JavaScript，可以使用 ES6+ 语法。</p>
<p>与桌面版自定义源调用机制互通，由于移动端内部使用的是一个轻量级 JavaScript 引擎，<strong>浏览器、Node.js 等常见宿主环境 API 不可用</strong>，部分 <code>lx.utils</code> API 不可用或者只有部分可用，可用宿主 API 见下方「可用宿主环境 API」部分。</p>
<p>脚本与应用的交互是使用类似事件收发的方式进行，这是一个基本的脚本例子：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@name</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 测试音乐源</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@description</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 我只是一个测试音乐源哦</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@version</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 1.0.0</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@author</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> xxx</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@homepage</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> http://xxx</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>EVENT_NAMES</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> request</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> on</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> send </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> globalThis</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">lx</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> qualitys </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>kw</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string-property property" style=color:#36acaa>'128k'</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'128'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string-property property" style=color:#36acaa>'320k'</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'320'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>flac</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'flac'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>flac24bit</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'flac24bit'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>local</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>httpRequest</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">url</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> options</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> reject</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>request</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">url</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> options</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">err</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> resp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>resolve</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">resp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">body</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> apis </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>kw</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>musicUrl</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter punctuation" style=color:#393A34>{</span><span class="token parameter"> songmid </span><span class="token parameter punctuation" style=color:#393A34>}</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> quality</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>httpRequest</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'http://xxx'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">url</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 注册应用 API 请求事件</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// source 音乐源，可能的值取决于初始化时传入的 sources 对象的源 key 值</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// info 请求附加信息，内容根据 action 变化</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// action 请求操作类型，目前只有 musicUrl，即获取音乐 URL 链接，</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//    当 action 为 musicUrl 时 info 的结构：{type, musicInfo}，</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//        info.type：音乐质量，可能的值有 128k / 320k / flac / flac24bit（取决于初始化时对应源传入的 qualitys 值中的一个）</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//                   特殊情况：源为 local 时，该值为 null</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//        info.musicInfo：音乐信息对象，里面有音乐 ID、名字等信息</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>EVENT_NAMES</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter punctuation" style=color:#393A34>{</span><span class="token parameter"> source</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> action</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> info </span><span class="token parameter punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 被调用时必须返回 Promise 对象</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>switch</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// action 为 musicUrl 时需要在 Promise 返回歌曲 url</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>case</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'musicUrl'</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> apis</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">source</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>musicUrl</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">info</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">musicInfo</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> qualitys</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">source</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">info</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>reject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// action 为 lyric 时需要在 Promise 返回歌词信息</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>case</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'lyric'</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> apis</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">source</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>musicUrl</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">info</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">musicInfo</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>reject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// action 为 pic 时需要在 Promise 返回歌曲封面 url</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>case</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'pic'</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> apis</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">source</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>musicUrl</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">info</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">musicInfo</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>reject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 脚本初始化完成后需要发送 inited 事件告知应用</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 注意：初始化事件被发送前，执行脚本的过程中出现任何错误将视为脚本初始化失败</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>send</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>EVENT_NAMES</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">inited</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>openDevTools</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 是否打开开发者工具，方便用于调试脚本</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>sources</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 当前脚本支持的源</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>kw</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 支持的源对象，可用 key 值：kw/kg/tx/wy/mg/local</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>name</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'酷我音乐'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>type</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'music'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 目前固定为 music</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>actions</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'musicUrl'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 除了 local 外，其他的固定为 ['musicUrl']</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>qualitys</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'128k'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'320k'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'flac'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'flac24bit'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 当前脚本的该源所支持获取的 Url 音质，有效的值有：['128k', '320k', 'flac', 'flac24bit']</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>local</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>name</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'本地音乐'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>type</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'music'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 目前固定为 music</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>actions</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'musicUrl'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'lyric'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'pic'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 源为 local 时，支持 ['musicUrl', 'lyric', 'pic']</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>qualitys</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 源为 local 时，该值传入空数组即可</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=自定义源信息>自定义源信息<a href=#自定义源信息 class=hash-link aria-label=自定义源信息的直接链接 title=自定义源信息的直接链接>​</a></h2>
<p>文件的开头必须包含以下注释：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@name</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 测试脚本</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@description</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 我只是一个测试脚本</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@version</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 1.0.0</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@author</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> xxx</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@homepage</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> http://xxx</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li><code>@name</code>：源的名字，建议不要过长，24 个字符以内。</li>
<li><code>@description</code>：源的描述，建议不要过长，36 个字符以内，可不填，不填时可以删除它。</li>
<li><code>@version</code>：源的版本号，可不填，不填时可以删除它。</li>
<li><code>@author</code>：源的作者名字，可不填，不填时可以删除它。</li>
<li><code>@homepage</code>：源的主页，可不填，不填时可以删除它。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislx><code>globalThis.lx</code><a href=#globalthislx class=hash-link aria-label=globalthislx的直接链接 title=globalthislx的直接链接>​</a></h2>
<p>应用为脚本暴露的 API 对象。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxversion><code>globalThis.lx.version</code><a href=#globalthislxversion class=hash-link aria-label=globalthislxversion的直接链接 title=globalthislxversion的直接链接>​</a></h3>
<p>自定义源 API 版本，API 变更时此版本号将会更改。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxenv><code>globalThis.lx.env</code><a href=#globalthislxenv class=hash-link aria-label=globalthislxenv的直接链接 title=globalthislxenv的直接链接>​</a></h3>
<p>自定义源运行环境，移动端将固定为 <code>mobile</code>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxcurrentscriptinfo><code>globalThis.lx.currentScriptInfo</code><a href=#globalthislxcurrentscriptinfo class=hash-link aria-label=globalthislxcurrentscriptinfo的直接链接 title=globalthislxcurrentscriptinfo的直接链接>​</a></h3>
<p>当前自定义源脚本信息（导入时在头部解析到的）：</p>
<ul>
<li><code>globalThis.lx.currentScriptInfo.name</code>：源的名字，即 <code>@name</code> 的内容。</li>
<li><code>globalThis.lx.currentScriptInfo.description</code>：源的描述，即 <code>@description</code> 的内容。</li>
<li><code>globalThis.lx.currentScriptInfo.version</code>：源的版本号，即 <code>@version</code> 的内容。</li>
<li><code>globalThis.lx.currentScriptInfo.author</code>：源的作者名字，即 <code>@author</code> 的内容。</li>
<li><code>globalThis.lx.currentScriptInfo.homepage</code>：源的主页，即 <code>@homepage</code> 的内容。</li>
<li><code>globalThis.lx.currentScriptInfo.rawScript</code>：源的原始代码。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxevent_names><code>globalThis.lx.EVENT_NAMES</code><a href=#globalthislxevent_names class=hash-link aria-label=globalthislxevent_names的直接链接 title=globalthislxevent_names的直接链接>​</a></h3>
<p>常量事件名称对象，发送、注册事件时传入事件名时使用，可用值：</p>
<table><thead><tr><th>事件名<th>描述<tbody><tr><td><code>inited</code><td>脚本初始化完成后发送给应用的事件名，发送该事件时需要传入以下信息：<code>{ sources }</code><br><code>sources</code>：支持的源信息对象<br><code>sources[kw/kg/tx/wy/mg/local].name</code>：源的名字（目前非必须）<br><code>sources[kw/kg/tx/wy/mg/local].type</code>：源类型，目前固定值需为 <code>music</code><br><code>sources[kw/kg/tx/wy/mg/local].actions</code>：支持的 actions 数组，<code>local</code> 源可用值为 <code>musicUrl</code>、<code>lyric</code>、<code>pic</code>，其他源只支持 <code>musicUrl</code><br><code>sources[kw/kg/tx/wy/mg/local].qualitys</code>：该源支持的音质列表，有效的值为 <code>['128k', '320k', 'flac', 'flac24bit']</code>，该字段用于控制应用可用的音质类型，当 <code>source</code> 为 <code>local</code> 时，传入 <code>[]</code> 即可<tr><td><code>request</code><td>应用 API 请求事件名，回调入参：<code>handler({ source, action, info})</code>，回调必须返回 <code>Promise</code> 对象<br><code>source</code>：音乐源，可能的值取决于初始化时传入的 <code>sources</code> 对象的源 key 值<br><code>info</code>：请求附加信息，内容根据 <code>action</code> 变化<br><code>action</code>：请求操作类型，取决于发送 <code>inited</code> 事件时传入的 <code>actions</code> 数组中的值<br>当为 <code>musicUrl</code> 时表示获取音乐 URL 链接，<code>info</code> 的结构：<code>{type, musicInfo}</code><br><code>info.type</code>：音乐质量，可能的值有 <code>128k</code> / <code>320k</code> / <code>flac</code> / <code>flac24bit</code>（取决于初始化时对应源传入的 <code>qualitys</code> 值中的一个，<code>source</code> 为 <code>local</code> 时该值为 <code>null</code>）<br><code>info.musicInfo</code>：音乐信息对象，里面有音乐 ID、名字等信息，该操作需要在 Promise 返回 HTTP 形式的歌曲 URL<br>当为 <code>lyric</code> 时，表示获取音乐歌词，<code>info</code>的结构：<code>{musicInfo}</code>，该操作需要在 Promise 返回歌曲的歌词信息（结构为 <code>{lryic,tlryic,rlyric,lxlyric}</code>，例如：<code>{lyric:'..',tlryic:...}</code>）<br>当为 <code>pic</code> 时，表示获取音乐封面图片，<code>info</code> 的结构：<code>{musicInfo}</code>，该操作需要在 Promise 返回 HTTP 形式的歌曲封面图片 URL<tr><td><code>updateAlert</code><td>显示源更新弹窗，发送该事件时的参数：<code>{log, updateUrl}</code><br><code>log</code>：更新日志，必传，字符串类型，内容可以使用 <code>\n</code> 换行，最大长度 1024，超过此长度后将丢弃超出的部分<br><code>updateUrl</code>：更新地址，用于引导用户去该地址更新源，选传，需为 HTTP 协议的 URL 地址，最大长度 1024<br>此事件每次运行脚本只能调用一次（源版本 v1.2.0 新增）<br>例子：<code>lx.send(lx.EVENT_NAMES.updateAlert, { log: 'hello world', updateUrl: 'https://xxx.com' })</code></table>
<p><strong>注意：初始化事件被发送前，执行脚本的过程中出现任何错误将视为脚本初始化失败。</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxon><code>globalThis.lx.on</code><a href=#globalthislxon class=hash-link aria-label=globalthislxon的直接链接 title=globalthislxon的直接链接>​</a></h3>
<p>事件注册方法，应用主动与脚本通信时使用：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>event_name</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 事件名</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>handler</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 事件处理回调 -- 注意：注册的回调被调用时必须返回 Promise 对象</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">globalThis</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">lx</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event_name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> handler</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>注意</strong>：注册的回调在被调用时必须返回 <code>Promise</code> 对象。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxsend><code>globalThis.lx.send</code><a href=#globalthislxsend class=hash-link aria-label=globalthislxsend的直接链接 title=globalthislxsend的直接链接>​</a></h3>
<p>事件发送方法，脚本主动与应用通信时使用：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>event_name</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 事件名</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>datas</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 要传给应用的数据</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">globalThis</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">lx</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>send</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event_name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> datas</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxrequest><code>globalThis.lx.request</code><a href=#globalthislxrequest class=hash-link aria-label=globalthislxrequest的直接链接 title=globalthislxrequest的直接链接>​</a></h3>
<p>HTTP 请求方法，用于发送 HTTP 请求，此 HTTP 请求方法不受跨域规则限制：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-js codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>url</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 请求的URL</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>options</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 请求选项，可用选项有 method / headers / body / form / formData / timeout</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@param</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> </span><span class="token doc-comment comment parameter" style=color:#999988;font-style:italic>callback</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 请求结果的回调 入参：err, resp, body</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> * </span><span class="token doc-comment comment keyword" style=color:#00009f;font-style:italic>@return</span><span class="token doc-comment comment" style=color:#999988;font-style:italic> 返回一个方法，调用此方法可以终止HTTP请求</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> cancelHttp </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> globalThis</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">lx</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>request</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">url</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> options</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> callback</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=globalthislxutils><code>globalThis.lx.utils</code><a href=#globalthislxutils class=hash-link aria-label=globalthislxutils的直接链接 title=globalthislxutils的直接链接>​</a></h3>
<p>应用提供给脚本的工具方法：</p>
<ul>
<li><code>globalThis.lx.utils.buffer.from</code>：对应 Node.js 的 <code>Buffer.from</code>（部分实现，格式只支持 <code>base64</code>、<code>hex</code> 和 <code>utf8</code> 字符串）。</li>
<li><code>globalThis.lx.utils.buffer.bufToString</code>：Buffer 转字符串 <code>bufToString(buffer, format)</code>，<code>format</code> 对应 Node.js <code>Buffer.toString</code> 的参数（部分实现，格式只支持 <code>base64</code>、<code>hex</code> 和 <code>utf8</code> 字符串）。</li>
<li><code>globalThis.lx.utils.crypto.aesEncrypt</code>：AES 加密 <code>aesEncrypt(buffer, mode, key, iv)</code>（部分实现，算法只支持 <code>aes-128-cbc</code>、<code>aes-128-ecb</code>）。</li>
<li><code>globalThis.lx.utils.crypto.md5</code>：MD5 加密 <code>md5(str)</code>。</li>
<li><code>globalThis.lx.utils.crypto.randomBytes</code>：生成随机字符串 <code>randomBytes(size)</code>。</li>
<li><code>globalThis.lx.utils.crypto.rsaEncrypt</code>：RSA 加密 <code>rsaEncrypt(buffer, key)</code>。</li>
<li><del><code>globalThis.lx.utils.zlib.inflate</code>：解压 <code>inflate(buffer: Buffer) => Promise&lt;Buffer></code>。</del><em>移动版环境目前未实现</em></li>
<li><del><code>globalThis.lx.utils.zlib.deflate</code>：压缩 <code>deflate(buffer: Buffer) => Promise&lt;Buffer></code>。</del><em>移动版环境目前未实现</em></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=可用宿主环境-api>可用宿主环境 API<a href=#可用宿主环境-api class=hash-link aria-label="可用宿主环境 API的直接链接" title="可用宿主环境 API的直接链接">​</a></h2>
<ul>
<li><code>setTimeout</code> / <code>clearTimeout</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=移动版自定义源与桌面版自定义源的区别>移动版自定义源与桌面版自定义源的区别<a href=#移动版自定义源与桌面版自定义源的区别 class=hash-link aria-label=移动版自定义源与桌面版自定义源的区别的直接链接 title=移动版自定义源与桌面版自定义源的区别的直接链接>​</a></h2>
<ul>
<li>移动版 <code>inited</code> 事件无 <code>openDevTools</code> 选项。</li>
<li>移动版 <code>lx.utils</code> 的某些方法不可用，对于不可用或部分可用的方法，背后会有括号说明。</li>
<li>移动版只有极少部分宿主环境 API 可用，详情看「可用宿主环境 API」说明。</li>
<li>移动版由于预加载脚本与自定义脚本运行在同一个环境下，出于对预加载脚本的安全性考虑，除了 <code>Function.prototype.toString</code>、<code>Function.prototype.toLocaleString</code>、<code>Object.prototype.toString</code> 外的其他 JavaScript 内置属性都会被冻结，所以类似 <code>Array.prototype.push = ...</code> 的代码都将无效，但扩展内置对象的行为是允许的，例如：<code>Array.prototype.myPush = ...</code>。</li>
</ul>
<p>以上是自定义源功能在移动版与桌面版的区别，目前仅提供以上工具方法及宿主 API，如果需要其他方法可以在 GitHub <a href="https://github.com/lyswhut/lx-music-mobile/issues?q=is%3Aissue+" target=_blank rel="noopener noreferrer">提交 Issue</a> 进行讨论。</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/lyswhut/lx-music-doc/tree/master/docs/mobile/custom-source.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>最后<!-- -->于 <b><time datetime=2025-01-20T05:53:56.000Z itemprop=dateModified>2025年1月20日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=文件选项卡><a class="pagination-nav__link pagination-nav__link--prev" href=/mobile/datapath><div class=pagination-nav__sublabel>上一页</div><div class=pagination-nav__label>数据存储路径</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/mobile/use-source-code><div class=pagination-nav__sublabel>下一页</div><div class=pagination-nav__label>源码使用方法</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#自定义源信息 class="table-of-contents__link toc-highlight">自定义源信息</a><li><a href=#globalthislx class="table-of-contents__link toc-highlight"><code>globalThis.lx</code></a><ul><li><a href=#globalthislxversion class="table-of-contents__link toc-highlight"><code>globalThis.lx.version</code></a><li><a href=#globalthislxenv class="table-of-contents__link toc-highlight"><code>globalThis.lx.env</code></a><li><a href=#globalthislxcurrentscriptinfo class="table-of-contents__link toc-highlight"><code>globalThis.lx.currentScriptInfo</code></a><li><a href=#globalthislxevent_names class="table-of-contents__link toc-highlight"><code>globalThis.lx.EVENT_NAMES</code></a><li><a href=#globalthislxon class="table-of-contents__link toc-highlight"><code>globalThis.lx.on</code></a><li><a href=#globalthislxsend class="table-of-contents__link toc-highlight"><code>globalThis.lx.send</code></a><li><a href=#globalthislxrequest class="table-of-contents__link toc-highlight"><code>globalThis.lx.request</code></a><li><a href=#globalthislxutils class="table-of-contents__link toc-highlight"><code>globalThis.lx.utils</code></a></ul><li><a href=#可用宿主环境-api class="table-of-contents__link toc-highlight">可用宿主环境 API</a><li><a href=#移动版自定义源与桌面版自定义源的区别 class="table-of-contents__link toc-highlight">移动版自定义源与桌面版自定义源的区别</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 LX Music, Inc. Built with Docusaurus.</div></div></div></footer></div>